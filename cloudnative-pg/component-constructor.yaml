components:
  - name: github.com/ocm/cloudnative-pg
    version: 1.27.1
    provider:
      name: cloudnative-pg.io
    labels:
      - name: app.kubernetes.io/name
        value: cloudnative-pg
      - name: app.kubernetes.io/component
        value: database-operator
      - name: app.kubernetes.io/part-of
        value: cloudnative-pg
    resources:
      # ResourceGraphDefinition for KRO bootstrapping
      - name: cloudnative-pg-rgd
        type: yaml
        version: 1.27.1
        relation: local
        input:
          type: file
          path: rgd-template.yaml

      # CloudNativePG Operator Helm Chart (official)
      - name: cnpg-operator-chart
        type: helmChart
        version: 0.26.1
        relation: local
        input:
          type: helm
          path: cloudnative-pg-0.26.1.tgz

      # CloudNativePG Cluster Helm Chart (official)
      - name: cnpg-cluster-chart
        type: helmChart
        version: 0.0.11
        relation: local
        input:
          type: helm
          path: cluster-0.0.11.tgz

      # CloudNativePG Operator Manifest (legacy/alternative deployment)
      - name: cnpg-operator-manifest
        type: yaml
        version: 1.27.1
        relation: local
        input:
          type: file
          path: operator/cnpg-operator.yml

      # CloudNativePG Operator Helm Chart Values (reference)
      - name: cnpg-operator-values
        type: yaml
        version: 1.27.1
        relation: local
        input:
          type: file
          path: operator/values.yaml

      # CloudNativePG Cluster Helm Chart Values (reference)
      - name: cnpg-cluster-values
        type: yaml
        version: 1.27.1
        relation: local
        input:
          type: file
          path: operator/cluster-values.yaml

      # CloudNativePG Operator Container Image
      - name: cnpg-operator-image
        type: ociImage
        version: 1.27.1
        relation: external
        access:
          type: ociArtifact
          imageReference: ghcr.io/cloudnative-pg/cloudnative-pg:1.27.1

      # PostgreSQL 17 Image (latest supported)
      - name: postgresql-17-image
        type: ociImage
        version: "17"
        relation: external
        access:
          type: ociArtifact
          imageReference: ghcr.io/cloudnative-pg/postgresql:17

      # PostgreSQL 16 Image (LTS)
      - name: postgresql-16-image
        type: ociImage
        version: "16"
        relation: external
        access:
          type: ociArtifact
          imageReference: ghcr.io/cloudnative-pg/postgresql:16

      # Minimal Configuration (Single instance, development)
      - name: cnpg-minimal-config
        type: yaml
        version: 1.27.1
        relation: local
        input:
          type: file
          path: configs/minimal/cluster.yaml

      # Production Configuration (HA with replicas, backup, monitoring)
      - name: cnpg-production-config
        type: yaml
        version: 1.27.1
        relation: local
        input:
          type: file
          path: configs/production/cluster.yaml

      # Helm Chart Reference (for advanced users)
      - name: helm-chart-info
        type: yaml
        version: 1.27.1
        relation: local
        input:
          type: file
          path: docs/HELM_CHART_CONFIG.md

    sources:
      - name: cnpg-operator-source
        type: git
        version: 1.27.1
        access:
          type: github
          repoUrl: github.com/cloudnative-pg/cloudnative-pg
          ref: release-1.27

      - name: cnpg-helm-charts-source
        type: git
        version: 1.27.1
        access:
          type: github
          repoUrl: github.com/cloudnative-pg/charts
          ref: main
