components:
  - name: opendefense.cloud/keycloak
    provider:
      name: keycloak.org
    labels:
      - name: app.kubernetes.io/name
        value: keycloak
      - name: app.kubernetes.io/component
        value: identity-provider
      - name: app.kubernetes.io/part-of
        value: keycloak-operator
    resources:
      # Keycloak Operator CRD - Keycloaks
      - name: keycloak-crd
        type: yaml
        version: 26.4.5
        relation: local
        input:
          type: file
          path: operator/keycloaks-crd.yml
          mediaType: application/x-yaml

      # Keycloak Operator CRD - KeycloakRealmImports
      - name: keycloak-realm-import-crd
        type: yaml
        version: 26.4.5
        relation: local
        input:
          type: file
          path: operator/keycloakrealmimports-crd.yml
          mediaType: application/x-yaml

      # Keycloak Operator Deployment
      - name: keycloak-operator
        type: yaml
        version: 26.4.5
        relation: local
        input:
          type: file
          path: operator/operator.yml
          mediaType: application/x-yaml

      # Keycloak Operator Container Image
      - name: keycloak-operator-image
        type: ociImage
        version: 26.4.5
        relation: external
        access:
          type: ociArtifact
          imageReference: quay.io/keycloak/keycloak-operator:26.5.3

      # Keycloak Application Container Image
      - name: keycloak-image
        type: ociImage
        version: 26.4.5
        relation: external
        access:
          type: ociArtifact
          imageReference: quay.io/keycloak/keycloak:26.5.3

      # Minimal Configuration
      - name: keycloak-minimal-config
        type: yaml
        version: 26.4.5
        relation: local
        input:
          type: file
          path: configs/minimal/keycloak.yml
          mediaType: application/x-yaml

      # Production HA Configuration
      - name: keycloak-production-config
        type: yaml
        version: 26.4.5
        relation: local
        input:
          type: file
          path: configs/production/keycloak.yml
          mediaType: application/x-yaml

    # sources:
    #   - name: keycloak-operator-manifests
    #     type: git
    #     version: 26.4.5
    #     access:
    #       type: github
    #       repoUrl: github.com/keycloak/keycloak-k8s-resources
    #       ref: 26.4.5
